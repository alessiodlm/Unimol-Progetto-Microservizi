{"openapi":"3.1.0","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Ticket","description":"API per la gestione dei ticket dell'help desk"}],"paths":{"/api/v1/tickets/{ticketId}/stato":{"put":{"tags":["Ticket"],"summary":"Aggiorna lo stato di un ticket","description":"Permette all'operatore assegnato di aggiornare lo stato del ticket","operationId":"updateTicketStatus","parameters":[{"name":"ticketId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TicketStatusUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Stato aggiornato"},"400":{"description":"Stato non valido"},"403":{"description":"Utente non autorizzato"},"404":{"description":"Ticket non trovato"},"401":{"description":"Token mancante o non valido"}}}},"/api/v1/tickets/{ticketId}/assegna":{"put":{"tags":["Ticket"],"summary":"Assegna un operatore a un ticket","description":"Permette agli operatori di assegnarsi un ticket non ancora assegnato","operationId":"assegnaOperatore","parameters":[{"name":"ticketId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Operatore assegnato","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}},"403":{"description":"Utente non autorizzato","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}},"404":{"description":"Ticket non trovato","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}},"401":{"description":"Token mancante o non valido","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}}}}},"/api/v1/tickets":{"get":{"tags":["Ticket"],"summary":"Recupera tutti i ticket dell'utente","description":"Restituisce la lista dei ticket creati dall'utente autenticato","operationId":"getMyTickets","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Lista restituita con successo","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TicketResponse"}}}}},"401":{"description":"Token mancante o non valido","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TicketResponse"}}}}}}},"post":{"tags":["Ticket"],"summary":"Crea un nuovo ticket","description":"Permette all'utente autenticato di creare un ticket","operationId":"createTicket","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TicketRequest"}}},"required":true},"responses":{"200":{"description":"Ticket creato con successo","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}},"400":{"description":"Dati non validi","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}},"401":{"description":"Token mancante o non valido","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}}}}},"/api/v1/tickets/{ticketId}/messaggi":{"get":{"tags":["Ticket"],"summary":"Recupera i messaggi di un ticket","description":"Restituisce la lista di tutti i messaggi associati al ticket identificato da ID. Accesso consentito solo al creatore o all'operatore assegnato.","operationId":"getMessagesByTicket","parameters":[{"name":"ticketId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Messaggi recuperati con successo","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MessageResponse"}}}}},"403":{"description":"Utente non autorizzato a visualizzare i messaggi di questo ticket","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MessageResponse"}}}}},"404":{"description":"Ticket non trovato","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MessageResponse"}}}}},"401":{"description":"Token mancante o non valido","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"post":{"tags":["Ticket"],"summary":"Invia un messaggio per un ticket","description":"Permette a un utente (creatore o operatore assegnato) di inviare un messaggio all'interno del ticket identificato da ID","operationId":"sendMessage","parameters":[{"name":"ticketId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageRequest"}}},"required":true},"responses":{"201":{"description":"Messaggio creato con successo","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"400":{"description":"Contenuto del messaggio mancante o non valido","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"403":{"description":"Utente non autorizzato a scrivere su questo ticket","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"404":{"description":"Ticket non trovato","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"401":{"description":"Token mancante o non valido","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/api/v1/tickets/{ticketId}/storico":{"get":{"tags":["Ticket"],"summary":"Recupera lo storico delle modifiche di un ticket","description":"Restituisce la cronologia delle modifiche di stato del ticket","operationId":"getTicketHistory","parameters":[{"name":"ticketId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Storico restituito con successo","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TicketHistoryResponse"}}}}},"404":{"description":"Ticket non trovato","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TicketHistoryResponse"}}}}},"401":{"description":"Token mancante o non valido","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TicketHistoryResponse"}}}}}}}},"/api/v1/tickets/{id}":{"get":{"tags":["Ticket"],"summary":"Recupera un ticket per ID","description":"Restituisce i dettagli di un ticket se appartiene all'utente","operationId":"getTicketById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Ticket trovato","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}},"404":{"description":"Ticket non trovato","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}},"403":{"description":"Accesso non autorizzato al ticket","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}},"401":{"description":"Token mancante o non valido","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}}}}}},"components":{"schemas":{"TicketStatusUpdateRequest":{"type":"object","properties":{"nuovoStato":{"type":"string"},"motivazione":{"type":"string"}}},"TicketResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"titolo":{"type":"string"},"descrizione":{"type":"string"},"status":{"type":"string","enum":["PRESO_IN_CARICO","IN_LAVORAZIONE","INFO_NECESSARIE","RISOLTO","CHIUSO"]},"categoria":{"type":"string","enum":["LOGIN","PAGAMENTI","CARRIERA","BIBLIOTECA","ALTRO"]},"creatoDaExternalId":{"type":"string"},"assegnatoAExternalId":{"type":"string"},"dataCreazione":{"type":"string","format":"date-time"},"ultimaModifica":{"type":"string","format":"date-time"}}},"TicketRequest":{"type":"object","properties":{"titolo":{"type":"string"},"descrizione":{"type":"string"},"categoria":{"type":"string"},"externalUserId":{"type":"string"}}},"MessageRequest":{"type":"object","properties":{"contenuto":{"type":"string"}}},"MessageResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"contenuto":{"type":"string"},"autoreId":{"type":"string"},"timestamp":{"type":"string","format":"date-time"}}},"TicketHistoryResponse":{"type":"object","properties":{"statoPrecedente":{"type":"string"},"statoSuccessivo":{"type":"string"},"modificatoDa":{"type":"string"},"dataModifica":{"type":"string","format":"date-time"}}}}}}